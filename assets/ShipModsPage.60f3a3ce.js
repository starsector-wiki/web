import{d as se,e as ce,f as Z,b as xe,Q as T}from"./QBtn.e9fe41b1.js";import{u as ee,a as te}from"./use-dark.ee363878.js";import{r as F,a as c,h as v,c as Q,g as N,a3 as w,s as A,a4 as Se,D as pe,q as qe,a5 as Ve,o as de,d as Ce,a6 as Ee,I as Ie,U as Be,K as O,L as z,M as $,Q as g,N as L,O as ue,S as ie,C as K,a7 as H,V as G,W,R as X,X as J}from"./index.f6bbdeba.js";import{c as fe,h as ne}from"./render.98846e7c.js";import{Q as Fe}from"./QPage.d5174454.js";function ve(e,d){const t=F(null),h=c(()=>e.disable===!0?null:v("span",{ref:t,class:"no-outline",tabindex:-1}));function m(s){const f=d.value;s!==void 0&&s.type.indexOf("key")===0?f!==null&&document.activeElement!==f&&f.contains(document.activeElement)===!0&&f.focus():t.value!==null&&(s===void 0||f!==null&&f.contains(s.target)===!0)&&t.value.focus()}return{refocusTargetEl:h,refocusTarget:m}}const me={name:String};function ge(e={}){return(d,t,h)=>{d[t](v("input",{class:"hidden"+(h||""),...e.value}))}}var be={xs:30,sm:35,md:40,lg:50,xl:60};const Me=()=>v("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[v("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),v("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]);var we=Q({name:"QRadio",props:{...ee,...se,...me,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(e,{slots:d,emit:t}){const{proxy:h}=N(),m=te(e,h.$q),s=ce(e,be),f=F(null),{refocusTargetEl:_,refocusTarget:x}=ve(e,f),S=c(()=>w(e.modelValue)===w(e.val)),I=c(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(e.disable===!0?" disabled":"")+(m.value===!0?" q-radio--dark":"")+(e.dense===!0?" q-radio--dense":"")+(e.leftLabel===!0?" reverse":"")),V=c(()=>{const l=e.color!==void 0&&(e.keepColor===!0||S.value===!0)?` text-${e.color}`:"";return`q-radio__inner relative-position q-radio__inner--${S.value===!0?"truthy":"falsy"}${l}`}),p=c(()=>(S.value===!0?e.checkedIcon:e.uncheckedIcon)||null),i=c(()=>e.disable===!0?-1:e.tabindex||0),a=c(()=>{const l={type:"radio"};return e.name!==void 0&&Object.assign(l,{".checked":S.value===!0,"^checked":S.value===!0?"checked":void 0,name:e.name,value:e.val}),l}),y=ge(a);function q(l){l!==void 0&&(A(l),x(l)),e.disable!==!0&&S.value!==!0&&t("update:modelValue",e.val,l)}function M(l){(l.keyCode===13||l.keyCode===32)&&A(l)}function D(l){(l.keyCode===13||l.keyCode===32)&&q(l)}Object.assign(h,{set:q});const b=Me();return()=>{const l=p.value!==null?[v("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[v(Z,{class:"q-radio__icon",name:p.value})])]:[b];e.disable!==!0&&y(l,"unshift"," q-radio__native q-ma-none q-pa-none");const k=[v("div",{class:V.value,style:s.value,"aria-hidden":"true"},l)];_.value!==null&&k.push(_.value);const C=e.label!==void 0?fe(d.default,[e.label]):ne(d.default);return C!==void 0&&k.push(v("div",{class:"q-radio__label q-anchor--skip"},C)),v("div",{ref:f,class:I.value,tabindex:i.value,role:"radio","aria-label":e.label,"aria-checked":S.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:q,onKeydown:M,onKeyup:D},k)}}});const he={...ee,...se,...me,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:e=>e==="tf"||e==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},ye=["update:modelValue"];function ke(e,d){const{props:t,slots:h,emit:m,proxy:s}=N(),{$q:f}=s,_=te(t,f),x=F(null),{refocusTargetEl:S,refocusTarget:I}=ve(t,x),V=ce(t,be),p=c(()=>t.val!==void 0&&Array.isArray(t.modelValue)),i=c(()=>{const r=w(t.val);return p.value===!0?t.modelValue.findIndex(n=>w(n)===r):-1}),a=c(()=>p.value===!0?i.value!==-1:w(t.modelValue)===w(t.trueValue)),y=c(()=>p.value===!0?i.value===-1:w(t.modelValue)===w(t.falseValue)),q=c(()=>a.value===!1&&y.value===!1),M=c(()=>t.disable===!0?-1:t.tabindex||0),D=c(()=>`q-${e} cursor-pointer no-outline row inline no-wrap items-center`+(t.disable===!0?" disabled":"")+(_.value===!0?` q-${e}--dark`:"")+(t.dense===!0?` q-${e}--dense`:"")+(t.leftLabel===!0?" reverse":"")),b=c(()=>{const r=a.value===!0?"truthy":y.value===!0?"falsy":"indet",n=t.color!==void 0&&(t.keepColor===!0||(e==="toggle"?a.value===!0:y.value!==!0))?` text-${t.color}`:"";return`q-${e}__inner relative-position non-selectable q-${e}__inner--${r}${n}`}),l=c(()=>{const r={type:"checkbox"};return t.name!==void 0&&Object.assign(r,{".checked":a.value,"^checked":a.value===!0?"checked":void 0,name:t.name,value:p.value===!0?t.val:t.trueValue}),r}),k=ge(l),C=c(()=>{const r={tabindex:M.value,role:e==="toggle"?"switch":"checkbox","aria-label":t.label,"aria-checked":q.value===!0?"mixed":a.value===!0?"true":"false"};return t.disable===!0&&(r["aria-disabled"]="true"),r});function B(r){r!==void 0&&(A(r),I(r)),t.disable!==!0&&m("update:modelValue",P(),r)}function P(){if(p.value===!0){if(a.value===!0){const r=t.modelValue.slice();return r.splice(i.value,1),r}return t.modelValue.concat([t.val])}if(a.value===!0){if(t.toggleOrder!=="ft"||t.toggleIndeterminate===!1)return t.falseValue}else if(y.value===!0){if(t.toggleOrder==="ft"||t.toggleIndeterminate===!1)return t.trueValue}else return t.toggleOrder!=="ft"?t.trueValue:t.falseValue;return t.indeterminateValue}function R(r){(r.keyCode===13||r.keyCode===32)&&A(r)}function U(r){(r.keyCode===13||r.keyCode===32)&&B(r)}const j=d(a,q);return Object.assign(s,{toggle:B}),()=>{const r=j();t.disable!==!0&&k(r,"unshift",` q-${e}__native absolute q-ma-none q-pa-none`);const n=[v("div",{class:b.value,style:V.value,"aria-hidden":"true"},r)];S.value!==null&&n.push(S.value);const o=t.label!==void 0?fe(h.default,[t.label]):ne(h.default);return o!==void 0&&n.push(v("div",{class:`q-${e}__label q-anchor--skip`},o)),v("div",{ref:x,class:D.value,...C.value,onClick:B,onKeydown:R,onKeyup:U},n)}}const Oe=()=>v("div",{key:"svg",class:"q-checkbox__bg absolute"},[v("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[v("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),v("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var De=Q({name:"QCheckbox",props:he,emits:ye,setup(e){const d=Oe();function t(h,m){const s=c(()=>(h.value===!0?e.checkedIcon:m.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>s.value!==null?[v("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[v(Z,{class:"q-checkbox__icon",name:s.value})])]:[d]}return ke("checkbox",t)}}),Ae=Q({name:"QToggle",props:{...he,icon:String,iconColor:String},emits:ye,setup(e){function d(t,h){const m=c(()=>(t.value===!0?e.checkedIcon:h.value===!0?e.indeterminateIcon:e.uncheckedIcon)||e.icon),s=c(()=>t.value===!0?e.iconColor:null);return()=>[v("div",{class:"q-toggle__track"}),v("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},m.value!==void 0?[v(Z,{name:m.value,color:s.value})]:void 0)]}return ke("toggle",d)}});const _e={radio:we,checkbox:De,toggle:Ae},Te=Object.keys(_e);function Y(e,d){if(typeof e=="function")return e;const t=e!==void 0?e:d;return h=>h[t]}var re=Q({name:"QOptionGroup",props:{...ee,modelValue:{required:!0},options:{type:Array,validator:e=>e.every(Se),default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],name:String,type:{type:String,default:"radio",validator:e=>Te.includes(e)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{emit:d,slots:t}){const{proxy:{$q:h}}=N(),m=Array.isArray(e.modelValue);e.type==="radio"?m===!0&&console.error("q-option-group: model should not be array"):m===!1&&console.error("q-option-group: model should be array in your case");const s=te(e,h),f=c(()=>_e[e.type]),_=c(()=>Y(e.optionValue,"value")),x=c(()=>Y(e.optionLabel,"label")),S=c(()=>Y(e.optionDisable,"disable")),I=c(()=>e.options.map(a=>({val:_.value(a),name:a.name===void 0?e.name:a.name,disable:e.disable||S.value(a),leftLabel:a.leftLabel===void 0?e.leftLabel:a.leftLabel,color:a.color===void 0?e.color:a.color,checkedIcon:a.checkedIcon,uncheckedIcon:a.uncheckedIcon,dark:a.dark===void 0?s.value:a.dark,size:a.size===void 0?e.size:a.size,dense:e.dense,keepColor:a.keepColor===void 0?e.keepColor:a.keepColor}))),V=c(()=>"q-option-group q-gutter-x-sm"+(e.inline===!0?" q-option-group--inline":"")),p=c(()=>{const a={role:"group"};return e.type==="radio"&&(a.role="radiogroup",e.disable===!0&&(a["aria-disabled"]="true")),a});function i(a){d("update:modelValue",a)}return()=>v("div",{class:V.value,...p.value},e.options.map((a,y)=>{const q=t["label-"+y]!==void 0?()=>t["label-"+y](a):t.label!==void 0?()=>t.label(a):void 0;return v("div",[v(f.value,{label:q===void 0?x.value(a):null,modelValue:e.modelValue,"onUpdate:modelValue":i,...I.value[y]},q)])}))}});let $e=[];function Le(e){$e.length===0&&e()}var Qe=Q({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:d,emit:t}){const h=N(),m=F(null);let s=0;const f=[];function _(i){const a=typeof i=="boolean"?i:e.noErrorFocus!==!0,y=++s,q=(b,l)=>{t(`validation${b===!0?"Success":"Error"}`,l)},M=b=>{const l=b.validate();return typeof l.then=="function"?l.then(k=>({valid:k,comp:b}),k=>({valid:!1,comp:b,err:k})):Promise.resolve({valid:l,comp:b})};return(e.greedy===!0?Promise.all(f.map(M)).then(b=>b.filter(l=>l.valid!==!0)):f.reduce((b,l)=>b.then(()=>M(l).then(k=>{if(k.valid===!1)return Promise.reject(k)})),Promise.resolve()).catch(b=>[b])).then(b=>{if(b===void 0||b.length===0)return y===s&&q(!0),!0;if(y===s){const{comp:l,err:k}=b[0];if(k!==void 0&&console.error(k),q(!1,l),a===!0){const C=b.find(({comp:B})=>typeof B.focus=="function"&&xe(B.$)===!1);C!==void 0&&C.comp.focus()}}return!1})}function x(){s++,f.forEach(i=>{typeof i.resetValidation=="function"&&i.resetValidation()})}function S(i){i!==void 0&&A(i);const a=s+1;_().then(y=>{a===s&&y===!0&&(e.onSubmit!==void 0?t("submit",i):i!==void 0&&i.target!==void 0&&typeof i.target.submit=="function"&&i.target.submit())})}function I(i){i!==void 0&&A(i),t("reset"),Ce(()=>{x(),e.autofocus===!0&&e.noResetFocus!==!0&&V()})}function V(){Le(()=>{if(m.value===null)return;const i=m.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||m.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||m.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(m.value.querySelectorAll("[tabindex]"),a=>a.tabIndex!==-1);i!=null&&i.focus({preventScroll:!0})})}pe(Ee,{bindComponent(i){f.push(i)},unbindComponent(i){const a=f.indexOf(i);a!==-1&&f.splice(a,1)}});let p=!1;return qe(()=>{p=!0}),Ve(()=>{p===!0&&e.autofocus===!0&&V()}),de(()=>{e.autofocus===!0&&V()}),Object.assign(h.proxy,{validate:_,resetValidation:x,submit:S,reset:I,focus:V,getValidationComponents:()=>f}),()=>v("form",{class:"q-form",ref:m,onSubmit:S,onReset:I},ne(d.default))}});const Pe={class:"q-pa-sm window-width"},Re={class:"items"},je={class:"item"},ze={class:"item_img_section"},Ne=["src"],Ue={class:"items"},Ke={class:"item"},He={class:"item_img_section"},Ge=["src"],We={class:"items"},Xe={class:"item"},Je={class:"item_img_section"},Ye=["src"],at=Ie({name:"ShipModsPage",__name:"ShipModsPage",setup(e){const d=Be(),t=S(),h=I(),m=F([]),s=F([]),f=F([]),_=F([]),x=F([]);function S(){const n=new Map;d.sortdShipMod.forEach(u=>{u.uiTags.forEach(E=>{n.has(E)?n.set(E,n.get(E)+1):n.set(E,1)})});const o=[];o.push({label:"\u5168\u90E8("+d.sortdShipMod.length+")",value:"\u5168\u90E8"});for(let[u,E]of n)o.push({label:u+"("+E+")",value:u});return o}function I(){const n=new Map;d.sortdShipMod.forEach(u=>{var E,oe,ae,le;n.has((E=u.manufacturer)!=null?E:"\u901A\u5E38")?n.set((ae=u.manufacturer)!=null?ae:"\u901A\u5E38",n.get((le=u.manufacturer)!=null?le:"\u901A\u5E38")+1):n.set((oe=u.manufacturer)!=null?oe:"\u901A\u5E38",1)});const o=[];o.push({label:"\u5168\u90E8("+d.sortdShipMod.length+")",value:"\u5168\u90E8"});for(let[u,E]of n)o.push({label:u+"("+E+")",value:u});return o}de(()=>{j()});const V=n=>n.tags.includes("dmod"),p=n=>!n.tags.includes("dmod"),i=n=>n.hidden,a=n=>!n.hidden,y=(n,o)=>n.id.localeCompare(o.id),q=[p,a],M=[p,i],D=[V,i];function b(){return d.sortdShipMod.filter(n=>q.every(o=>o(n))).sort(y)}function l(){return d.sortdShipMod.filter(n=>M.every(o=>o(n))).sort(y)}function k(){return d.sortdShipMod.filter(n=>D.every(o=>o(n))).sort(y)}function C(n){return n.uiTags.some(o=>_.value.includes(o))}function B(n){var o;return x.value.includes((o=n.manufacturer)!=null?o:"\u901A\u5E38")}function P(){_.value=t.map(n=>n.value)}function R(){x.value=h.map(n=>n.value)}function U(){let n=b(),o=l(),u=k();_.value.length>0&&!_.value.includes("\u5168\u90E8")?(n=n.filter(C),o=o.filter(C),u=u.filter(C)):_.value.includes("\u5168\u90E8")&&P(),x.value.length>0&&!x.value.includes("\u5168\u90E8")?(n=n.filter(B),o=o.filter(B),u=u.filter(B)):x.value.includes("\u5168\u90E8")&&R(),m.value=n,s.value=o,f.value=u,console.log(s.value)}function j(){m.value=b(),s.value=l(),f.value=k(),P(),R()}function r(){j()}return(n,o)=>(O(),z(Fe,{padding:"",style:{display:"flex","flex-flow":"row wrap","justify-content":"flex-start","align-items":"stretch",gap:"10px 10px"}},{default:$(()=>[g("div",Pe,[L(Qe,{onSubmit:U,onReset:r,class:"q-gutter-md"},{default:$(()=>[o[2]||(o[2]=ue(" UI\u6807\u7B7E: ")),L(re,{name:"accepted_uiTags",modelValue:_.value,"onUpdate:modelValue":o[0]||(o[0]=u=>_.value=u),options:ie(t),type:"checkbox",color:"primary",inline:""},null,8,["modelValue","options"]),o[3]||(o[3]=ue(" \u8BBE\u8BA1\u7C7B\u578B: ")),L(re,{name:"accepted_manufacturer",modelValue:x.value,"onUpdate:modelValue":o[1]||(o[1]=u=>x.value=u),options:ie(h),type:"checkbox",color:"primary",inline:""},null,8,["modelValue","options"]),L(T,{label:"\u63D0\u4EA4",type:"submit",color:"primary"}),L(T,{label:"\u91CD\u7F6E",type:"reset",color:"primary",flat:"",class:"q-ml-sm"})]),_:1})]),o[4]||(o[4]=g("br",null,null,-1)),o[5]||(o[5]=g("br",null,null,-1)),K(g("h4",null,"\u53EF\u4F7F\u7528\u63D2\u4EF6",512),[[H,m.value.length>0]]),g("div",Re,[(O(!0),G(J,null,W(m.value,u=>(O(),z(T,{style:{flex:"0.2 0 auto"},key:u.id,to:{name:"ship_mod",params:{id:u.id}}},{default:$(()=>[g("div",je,[g("div",ze,[g("img",{decoding:"async",src:u.icon},null,8,Ne)]),g("span",null,X(u.name),1)])]),_:2},1032,["to"]))),128))]),o[6]||(o[6]=g("br",null,null,-1)),o[7]||(o[7]=g("br",null,null,-1)),K(g("h4",null,"D\u63D2\u4EF6",512),[[H,f.value.length>0]]),g("div",Ue,[(O(!0),G(J,null,W(f.value,u=>(O(),z(T,{style:{flex:"0.2 0 auto"},key:u.id,to:{name:"ship_mod",params:{id:u.id}}},{default:$(()=>[g("div",Ke,[g("div",He,[g("img",{decoding:"async",src:u.icon},null,8,Ge)]),g("span",null,X(u.name),1)])]),_:2},1032,["to"]))),128))]),o[8]||(o[8]=g("br",null,null,-1)),o[9]||(o[9]=g("br",null,null,-1)),K(g("h4",null,"\u9690\u85CF\u63D2\u4EF6",512),[[H,s.value.length>0]]),g("div",We,[(O(!0),G(J,null,W(s.value,u=>(O(),z(T,{style:{flex:"0.2 0 auto"},key:u.id,to:{name:"ship_mod",params:{id:u.id}}},{default:$(()=>[g("div",Xe,[g("div",Je,[g("img",{decoding:"async",src:u.icon},null,8,Ye)]),g("span",null,X(u.name),1)])]),_:2},1032,["to"]))),128))])]),_:1}))}});export{at as default};
