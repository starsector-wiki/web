import{Q as G}from"./QPage.d213b63d.js";import{I as A,K as s,U as o,Q as t,R as a,S as $,$ as I,_ as h,X as S,a as k,V as P,N as i,W as b,a0 as Q,r as J,a1 as K,J as X,L as f,M as E,O as C,a2 as Y}from"./index.993e80dd.js";import{_ as V}from"./ShipsDiv.cc00be4d.js";import{_ as j}from"./WeaponSpriteDiv.5ef3c512.js";import"./render.2e5534a3.js";import"./QBtn.b61f06a9.js";function W(B){return parseFloat(B.toFixed(2))}const n=A({name:"MutableStatDiv",__name:"MutableStatDiv",props:{stat:{},addIsGood:{type:Boolean,default:!0}},setup(B){return(p,y)=>(s(),o(S,null,[t("span",null,a($(W)(p.stat.modifiedValue)),1),p.stat.hasModify()?(s(),o("span",{key:0,style:I({color:p.addIsGood&&p.stat.isPositive()||!p.addIsGood&&p.stat.isNegative()?"green":"red"})},"("+a((p.stat.isPositive()?"+":"")+$(W)(p.stat.getAddend()))+")",5)):h("",!0)],64))}}),q={style:{margin:"auto",position:"relative"}},H=["src"],z=A({name:"ShipSpriteDiv",__name:"ShipSpriteDiv",props:{ship:{}},setup(B){const p=k(()=>{if(B.ship){const y=[];for(const[e,F]of B.ship.weaponIdMap.entries())if(F){const d=b.getWeaponById(F),v=B.ship.allWeaponSlots.find(r=>r.id===e);d&&v&&y.push([d,v])}return y.sort((e,F)=>{const d=e[1].location,v=F[1].location;return d.x!==v.x?Math.abs(d.x)-Math.abs(v.x):Math.abs(d.y)-Math.abs(v.y)})}else return});return(y,e)=>(s(),o("div",q,[(s(!0),o(S,null,P(p.value,([F,d],v)=>(s(),o("div",{key:d.id,style:I({position:"absolute",bottom:y.ship.center.y+"px",left:y.ship.center.x+"px",transformOrigin:`50% ${d.hardPoint?75:50}%`,transform:`translate(-50%, ${d.hardPoint?25:50}%) translate(${d.location.y*-1}px, ${d.location.x*-1}px) rotate(${360-d.angle}deg)`})},[i(j,{weapon:F,"base-z-index":1+(v+1)*10,"is-hard-point":d.hardPoint},null,8,["weapon","base-z-index","is-hard-point"])],4))),128)),t("img",{decoding:"async",src:y.ship.sprite},null,8,H)]))}});const Z={key:0},c={style:{display:"grid","grid-template-columns":"3fr 1fr",gap:"10px"}},tt={style:{"text-align":"left","vertical-align":"top","white-space":"pre-wrap"}},lt={style:{margin:"auto",position:"relative"}},et={style:{"text-align":"right"}},ut={style:{"text-align":"right"}},st={style:{"text-align":"right"}},nt={style:{"text-align":"right"}},it={style:{"text-align":"right"}},at={style:{"text-align":"right"}},ot={style:{"text-align":"right"}},dt={style:{"text-align":"right"}},rt={style:{"text-align":"right"}},pt={style:{"text-align":"right"}},gt={style:{"text-align":"right"}},yt={style:{"text-align":"right"}},vt={style:{"text-align":"right"}},mt={style:{"text-align":"right"}},xt={style:{"text-align":"right"}},ft={style:{"text-align":"right"}},ht={style:{"text-align":"right"}},Ft={style:{"text-align":"right"}},Dt={style:{"text-align":"right"}},St={style:{"text-align":"right"}},Bt={style:{"text-align":"right"}},Ct={style:{"text-align":"right"}},Et={style:{"text-align":"right"}},kt={style:{"text-align":"right"}},bt={colspan:"5"},Pt={key:0},$t={colspan:"5",style:{"white-space":"pre-wrap"}},At={colspan:"5"},It={key:1},_t={colspan:"5",style:{"white-space":"pre-wrap"}},Mt={colspan:"5"},wt={colspan:"5"},Rt={key:1},Lt={colspan:"5"},Nt={key:1},Gt=A({name:"ShipPage",__name:"ShipPage",setup(B){const p=Q();let y=J(p.params.id);K(async r=>{y.value=r.params.id});const e=k(()=>b.getShipById(y.value)),F=k(()=>{var r,l;return b.getShipsByIds((l=(r=e.value)==null?void 0:r.skinIds)!=null?l:[])}),d=k(()=>{var r,l;return b.getShipsByIds((l=(r=e.value)==null?void 0:r.varinatIds)!=null?l:[])}),v=k(()=>{if(e.value&&e.value.station){const r=[];for(const[l,m]of e.value.moduleIdMap.entries())if(m){const x=b.getShipById(m),D=e.value.allWeaponSlots.find(u=>u.id===l);x&&D&&r.push([x,D])}return r.sort((l,m)=>{const x=l[0],D=m[0];if(x.isUnderParent()!==D.isUnderParent())return x.isUnderParent()?-1:1;if(x.isEmptyModule()!==D.isEmptyModule())return x.isEmptyModule()?-1:1;const u=l[1].location,g=m[1].location;return u.x!==g.x?Math.abs(g.x)-Math.abs(u.x):Math.abs(g.y)-Math.abs(u.y)})}else return[]});return(r,l)=>{const m=X("router-link");return s(),f(G,{padding:""},{default:E(()=>{var x,D;return[e.value===void 0?(s(),o("h2",Z,"Ship id:"+a($(y))+" not found.",1)):(s(),o(S,{key:1},[t("h4",null,a(e.value.getDisplayName()),1),t("div",c,[t("span",tt,a(e.value.description),1),t("div",lt,[(s(!0),o(S,null,P(v.value,([u,g],O)=>{var _,M,w,R,L,N,U,T;return s(),o("div",{key:g.id,style:I({position:"absolute",bottom:e.value.center.y+"px",left:e.value.center.x+"px",transformOrigin:`calc(${u.center.x}px - ${(M=(_=u.moduleAnchor)==null?void 0:_.y)!=null?M:0}px) calc(100% - ${u.center.y}px - ${(R=(w=u.moduleAnchor)==null?void 0:w.x)!=null?R:0}px)`,transform:`translate(${u.center.x*-1}px, ${u.center.y}px) translate(${(N=(L=u.moduleAnchor)==null?void 0:L.y)!=null?N:0}px, ${(T=(U=u.moduleAnchor)==null?void 0:U.x)!=null?T:0}px) translate(${g.location.y*-1}px, ${g.location.x*-1}px) rotate(${g.angle===0?0:360-g.angle}deg)`,zIndex:u.isUnderParent()?-1:2+O})},[i(z,{ship:u},null,8,["ship"])],4)}),128)),i(z,{ship:e.value},null,8,["ship"])])]),l[46]||(l[46]=t("br",null,null,-1)),l[47]||(l[47]=t("br",null,null,-1)),t("table",null,[l[42]||(l[42]=t("colgroup",null,[t("col",{style:{width:"21%"}}),t("col",{style:{width:"13%"}}),t("col",{style:{width:"20%"}}),t("col",{style:{width:"13%"}}),t("col",{style:{width:"20%"}}),t("col",{style:{width:"13%"}})],-1)),l[43]||(l[43]=t("thead",null,[t("tr",null,[t("th",{colspan:"4",style:{"text-align":"center"}},"\u540E\u52E4\u6570\u636E"),t("th",{colspan:"2",style:{"text-align":"center"}},"\u6218\u6597\u6027\u80FD")])],-1)),t("tbody",null,[t("tr",null,[l[0]||(l[0]=t("td",null,"\u4F5C\u6218\u540E\u6D88\u8017\u7684\u6218\u5907\u503C(CR)",-1)),t("td",et,a(e.value.crToDeploy)+"%",1),l[1]||(l[1]=t("td",null,"\u7EF4\u62A4\u6D88\u8017(\u8865\u7ED9/\u6708)",-1)),t("td",ut,[i(n,{stat:e.value.suppliesPerMonth,"add-is-good":!1},null,8,["stat"])]),l[2]||(l[2]=t("td",null,"\u7ED3\u6784\u503C",-1)),t("td",st,[i(n,{stat:e.value.hitPoints},null,8,["stat"])])]),t("tr",null,[l[4]||(l[4]=t("td",null,"\u6218\u5907\u503C(CR)\u6062\u590D\u901F\u7387(\u6BCF\u5929)",-1)),t("td",nt,[i(n,{stat:e.value.repairPercentPerDay},null,8,["stat"]),l[3]||(l[3]=C("% "))]),l[5]||(l[5]=t("td",null,"\u8F7D\u8D27\u91CF",-1)),t("td",it,[i(n,{stat:e.value.cargo},null,8,["stat"])]),l[6]||(l[6]=t("td",null,"\u88C5\u7532\u503C",-1)),t("td",at,[i(n,{stat:e.value.armorRating},null,8,["stat"])])]),t("tr",null,[l[7]||(l[7]=t("td",null,"\u90E8\u7F72\u6210\u672C(\u8865\u7ED9)",-1)),t("td",ot,[i(n,{stat:e.value.suppliesToRecover,"add-is-good":!1},null,8,["stat"])]),l[8]||(l[8]=t("td",null,"\u6700\u5927\u8F7D\u5458",-1)),t("td",dt,[i(n,{stat:e.value.maxCrew},null,8,["stat"])]),l[9]||(l[9]=t("td",null,"\u9632\u5FA1\u65B9\u5F0F",-1)),t("td",rt,a($(Y).get(e.value.shieldType)),1)]),t("tr",null,[l[10]||(l[10]=t("td",null,"\u90E8\u7F72\u70B9",-1)),t("td",pt,[i(n,{stat:e.value.suppliesToRecover,"add-is-good":!1},null,8,["stat"])]),l[11]||(l[11]=t("td",null,"\u5FC5\u8981\u8239\u5458",-1)),t("td",gt,[i(n,{stat:e.value.minCrew,"add-is-good":!1},null,8,["stat"])]),t("td",null,a(e.value.hasShield()?"\u62A4\u76FE\u89D2\u5EA6":e.value.hasPhase()?"\u76F8\u4F4D\u7EBF\u5708\u6FC0\u6D3B":""),1),t("td",yt,[e.value.hasShield()?(s(),f(n,{key:0,stat:e.value.shieldArc},null,8,["stat"])):e.value.hasPhase()?(s(),f(n,{key:1,stat:e.value.phaseCost,"add-is-good":!1},null,8,["stat"])):h("",!0)])]),t("tr",null,[l[12]||(l[12]=t("td",null,"\u5CF0\u503C\u65F6\u95F4(\u79D2)",-1)),t("td",vt,[i(n,{stat:e.value.noCRLossSeconds},null,8,["stat"])]),l[13]||(l[13]=t("td",null,"\u71C3\u6599\u5BB9\u91CF",-1)),t("td",mt,[i(n,{stat:e.value.fuel},null,8,["stat"])]),t("td",null,a(e.value.hasShield()?"\u62A4\u76FE\u7EF4\u6301(\u5E45\u80FD/\u79D2)":e.value.hasPhase()?"\u76F8\u4F4D\u7EBF\u5708\u7EF4\u6301(\u5E45\u80FD/\u79D2)":""),1),t("td",xt,[e.value.hasShield()?(s(),f(n,{key:0,stat:e.value.shieldUpkeep,"add-is-good":!1},null,8,["stat"])):e.value.hasPhase()?(s(),f(n,{key:1,stat:e.value.phaseUpKeep,"add-is-good":!1},null,8,["stat"])):h("",!0)])]),t("tr",null,[l[14]||(l[14]=t("td",null,null,-1)),l[15]||(l[15]=t("td",{style:{"text-align":"right"}},null,-1)),l[16]||(l[16]=t("td",null,"\u6700\u5927\u5B87\u5B99\u822A\u901F",-1)),t("td",ft,[i(n,{stat:e.value.maxBurn},null,8,["stat"])]),t("td",null,a(e.value.hasShield()?"\u62A4\u76FE\u6548\u7387(\u5E45\u80FD/\u4F24\u5BB3)":""),1),t("td",ht,[e.value.hasShield()?(s(),f(n,{key:0,stat:e.value.fluxPerDamageAbsorbed,"add-is-good":!1},null,8,["stat"])):h("",!0)])]),t("tr",null,[l[17]||(l[17]=t("td",null,null,-1)),l[18]||(l[18]=t("td",{style:{"text-align":"right"}},null,-1)),l[19]||(l[19]=t("td",null,"\u71C3\u6599\u6D88\u8017(\u5149\u5E74)",-1)),t("td",Ft,[i(n,{stat:e.value.fuelPerLY,"add-is-good":!1},null,8,["stat"])]),l[20]||(l[20]=t("td",null,"\u5E45\u80FD\u5BB9\u91CF",-1)),t("td",Dt,[i(n,{stat:e.value.fluxCapacity},null,8,["stat"])])]),t("tr",null,[l[21]||(l[21]=t("td",null,null,-1)),l[22]||(l[22]=t("td",{style:{"text-align":"right"}},null,-1)),l[23]||(l[23]=t("td",null,null,-1)),l[24]||(l[24]=t("td",{style:{"text-align":"right"}},null,-1)),l[25]||(l[25]=t("td",null,"\u5E45\u80FD\u8017\u6563",-1)),t("td",St,[i(n,{stat:e.value.fluxDissipation},null,8,["stat"])])]),t("tr",null,[l[26]||(l[26]=t("td",null,"\u88C5\u914D\u70B9\u6570",-1)),t("td",Bt,a(e.value.ordnancePoints),1),l[27]||(l[27]=t("td",null,"\u88AB\u4FA6\u5BDF\u8303\u56F4",-1)),t("td",Ct,[i(n,{stat:e.value.sensorProfile,"add-is-good":!1},null,8,["stat"])]),l[28]||(l[28]=t("td",null,"\u6700\u9AD8\u822A\u901F",-1)),t("td",Et,[i(n,{stat:e.value.maxSpeed},null,8,["stat"])])]),t("tr",null,[l[29]||(l[29]=t("td",null,null,-1)),l[30]||(l[30]=t("td",null,null,-1)),l[31]||(l[31]=t("td",null,"\u63A2\u6D4B\u8303\u56F4",-1)),t("td",kt,[i(n,{stat:e.value.sensorStrength},null,8,["stat"])]),l[32]||(l[32]=t("td",null,null,-1)),l[33]||(l[33]=t("td",{style:{"text-align":"right"}},null,-1))]),t("tr",null,[l[34]||(l[34]=t("td",null,"\u6218\u672F\u7CFB\u7EDF",-1)),t("td",bt,[e.value.getSystem()?(s(),f(m,{key:0,to:{name:"ship_system",params:{id:(x=e.value)==null?void 0:x.shipSystemId}}},{default:E(()=>{var u;return[C(a((u=e.value.getSystem())==null?void 0:u.name),1)]}),_:1},8,["to"])):h("",!0)]),l[35]||(l[35]=t("td",null,null,-1))]),e.value.hasSystem()?(s(),o("tr",Pt,[l[36]||(l[36]=t("td",null,null,-1)),t("td",$t,a(e.value.getSystemDescription()),1)])):h("",!0),t("tr",null,[l[37]||(l[37]=t("td",null,"\u7279\u6B8A\u7CFB\u7EDF",-1)),t("td",At,[e.value.getDefense()?(s(),f(m,{key:0,to:{name:"ship_system",params:{id:(D=e.value)==null?void 0:D.shipDefenseId}}},{default:E(()=>{var u,g;return[C(a((g=(u=e.value.getDefense())==null?void 0:u.name)!=null?g:"\u65E0"),1)]}),_:1},8,["to"])):h("",!0)])]),e.value.hasDefense()?(s(),o("tr",It,[l[38]||(l[38]=t("td",null,null,-1)),t("td",_t,a(e.value.getDefenseDescription()),1)])):h("",!0),t("tr",null,[l[39]||(l[39]=t("td",null,"\u5B89\u88C5\u69FD\u4F4D:",-1)),t("td",Mt,a(e.value.getSlotDescription()),1)]),t("tr",null,[l[40]||(l[40]=t("td",null,"\u519B\u5907\u8BE6\u60C5:",-1)),t("td",wt,[(s(!0),o(S,null,P(e.value.getWeapons(),u=>(s(),o("span",{style:{"margin-right":"10px"},key:u.id},[C(a(u.count)+"x ",1),u.id!=u.name?(s(),f(m,{key:0,to:{name:"weapon",params:{id:u.id}}},{default:E(()=>[C(a(u.name),1)]),_:2},1032,["to"])):(s(),o("span",Rt,a(u.name),1))]))),128))])]),t("tr",null,[l[41]||(l[41]=t("td",null,"\u8239\u4F53\u63D2\u69FD:",-1)),t("td",Lt,[(s(!0),o(S,null,P(e.value.getShipMods(),u=>(s(),o("span",{style:{"margin-right":"10px"},key:u.id},[u.id!=u.name?(s(),f(m,{key:0,to:{name:"ship_mod",params:{id:u.id}}},{default:E(()=>[C(a(u.name),1)]),_:2},1032,["to"])):(s(),o("span",Nt,a(u.name),1))]))),128))])])])]),l[48]||(l[48]=t("br",null,null,-1)),l[49]||(l[49]=t("br",null,null,-1)),F.value.length>0?(s(),o(S,{key:0},[l[44]||(l[44]=t("h4",null,"\u53D8\u4F53\u8239",-1)),i(V,{ships:F.value},null,8,["ships"])],64)):h("",!0),d.value.length>0?(s(),o(S,{key:1},[l[45]||(l[45]=t("h4",null,"\u88C5\u914D",-1)),i(V,{ships:d.value},null,8,["ships"])],64)):h("",!0),l[50]||(l[50]=t("br",null,null,-1)),l[51]||(l[51]=t("br",null,null,-1)),t("pre",null,[t("code",null,a(JSON.stringify(e.value,null,2)),1)])],64))]}),_:1})}}});export{Gt as default};
