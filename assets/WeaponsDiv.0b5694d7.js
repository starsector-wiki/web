import{u as Q,Q as O,a as S}from"./use-quasar.e16a694c.js";import{Q as z}from"./QBtn.3bea4207.js";import{E as A,r as W,a as h,H as m,W as b,Y as s,K as p,J as v,P as D,O as F,_ as y,$ as k,Z as T,L as w,I as N,a0 as R,ap as q,aq as U,ar as H}from"./index.f106f705.js";import{_ as J}from"./WeaponSpriteDiv.f65f59cc.js";const K={key:0,class:"filter-toolbar"},P={class:"filter-row"},Y={class:"filter-group"},Z={class:"filter-item"},j={class:"filter-item"},G={key:1,class:"result-count"},M={class:"card-item-list-page"},X={class:"card-item-content"},ee={style:{margin:"auto"}},ie=A({name:"WeaponsDiv",__name:"WeaponsDiv",props:{weaponValues:{},hiddenOptions:{type:Boolean,default:!1}},setup(_){const $=Q(),o=W([]),i=W([]),g=h(()=>_.weaponValues.map(a=>typeof a=="string"?R.getWeaponById(a):a).filter(a=>a!==void 0).sort(q)),f=h(()=>{let a=g.value;return o.value&&o.value.length>0&&(a=a.filter(t=>o.value.every(e=>C(t,e)))),i.value&&i.value.length>0&&(a=a.filter(t=>!i.value.some(e=>C(t,e)))),a}),I=h(()=>E(f.value,o.value,i.value)),L=h(()=>E(f.value,i.value,o.value));function E(a,t,e){const n=[];return Array.from(new Set(g.value.map(l=>l.size))).forEach(l=>{var c;const r=(c=U.get(l))!=null?c:l,u=`size:${l}`,d=a.filter(B=>B.size===l).length,x=t&&t.includes(u),V=e&&e.includes(u);n.push({label:`[\u5927\u5C0F] ${r}(${d})`,value:u,chipLabel:`[\u5927\u5C0F] ${r}`,disable:!x&&d===0||V})}),Array.from(new Set(g.value.map(l=>l.mountType))).forEach(l=>{var c;const r=(c=H.get(l))!=null?c:l,u=`type:${l}`,d=a.filter(B=>B.mountType===l).length,x=t&&t.includes(u),V=e&&e.includes(u);n.push({label:`[\u7C7B\u578B] ${r}(${d})`,value:u,chipLabel:`[\u7C7B\u578B] ${r}`,disable:!x&&d===0||V})}),n}function C(a,t){const[e,n]=t.split(":");return e==="size"?a.size===n:e==="type"?a.mountType===n:!1}return(a,t)=>(m(),b(k,null,[_.hiddenOptions?F("",!0):(m(),b("div",K,[s("div",P,[s("div",Y,[s("div",Z,[t[2]||(t[2]=s("div",{class:"filter-item-label"},"\u5305\u542B\u6761\u4EF6",-1)),p(O,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),options:I.value,multiple:"","emit-value":"","map-options":"","use-chips":"",dense:"","options-dense":"",behavior:D($).screen.lt.sm?"dialog":"menu",clearable:"","clear-icon":"close",placeholder:"\u9009\u62E9\u9700\u8981\u5305\u542B\u7684\u6761\u4EF6"},{"selected-item":v(e=>[p(S,{removable:"",dense:"",onRemove:n=>e.removeAtIndex(e.index),tabindex:e.tabindex,color:"primary","text-color":"white"},{default:v(()=>[w(y(e.opt.chipLabel||e.opt.label),1)]),_:2},1032,["onRemove","tabindex"])]),_:1},8,["modelValue","options","behavior"])]),s("div",j,[t[3]||(t[3]=s("div",{class:"filter-item-label"},"\u6392\u9664\u6761\u4EF6",-1)),p(O,{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e),options:L.value,multiple:"","emit-value":"","map-options":"","use-chips":"",dense:"","options-dense":"",behavior:D($).screen.lt.sm?"dialog":"menu",clearable:"","clear-icon":"close",placeholder:"\u9009\u62E9\u9700\u8981\u6392\u9664\u7684\u6761\u4EF6"},{"selected-item":v(e=>[p(S,{removable:"",dense:"",onRemove:n=>e.removeAtIndex(e.index),tabindex:e.tabindex,color:"negative","text-color":"white"},{default:v(()=>[w(y(e.opt.chipLabel||e.opt.label),1)]),_:2},1032,["onRemove","tabindex"])]),_:1},8,["modelValue","options","behavior"])])])])])),_.hiddenOptions?F("",!0):(m(),b("div",G," \u5171 "+y(f.value.length)+" \u4E2A\u7ED3\u679C ",1)),s("div",M,[(m(!0),b(k,null,T(f.value,e=>(m(),N(z,{class:"card-item",style:{"align-self":"stretch"},"no-caps":"",key:e.id,to:{name:"weapon",params:{id:e.id}}},{default:v(()=>[s("div",X,[s("div",ee,[p(J,{style:{flex:"0 0 auto"},weapon:e},null,8,["weapon"])]),s("span",null,y(e.name),1)])]),_:2},1032,["to"]))),128))])],64))}});export{ie as _};
