import{u as A,Q as E,a as z}from"./use-quasar.e16a694c.js";import{Q}from"./QBtn.3bea4207.js";import{E as D,r as w,a as k,H as d,W as f,Y as i,K as g,J as p,P as M,O as B,_ as h,$ as P,Z as R,L as _,I as T,X as F,a0 as U,at as q}from"./index.f106f705.js";const H={key:0,class:"filter-toolbar"},J={class:"filter-row"},K={class:"filter-group"},W={class:"filter-item"},X={class:"filter-item"},Y={key:1,class:"result-count"},Z={class:"card-item-list-page"},j={class:"card-item-content"},G={key:0},ie=D({name:"PlanetsDiv",__name:"PlanetsDiv",props:{planetValues:{},hiddenOptions:{type:Boolean,default:!1}},setup(x){const C=A(),u=w([]),r=w([]),b=k(()=>x.planetValues.map(a=>typeof a=="string"?U.getPlanetById(a):a).filter(a=>a!==void 0).filter(a=>!a.isSubStation).sort(q)),y=k(()=>{let a=b.value;return u.value&&u.value.length>0&&(a=a.filter(n=>u.value.every(e=>$(n,e)))),r.value&&r.value.length>0&&(a=a.filter(n=>!r.value.some(e=>$(n,e)))),a}),L=k(()=>S(y.value,u.value,r.value)),N=k(()=>S(y.value,r.value,u.value));function S(a,n,e){const l=[],I=new Map;for(const t of b.value)I.set(t.factionId,{id:t.factionId,name:t.faction.displayName});Array.from(I.values()).sort((t,o)=>t.name.localeCompare(o.name)).forEach(t=>{const o=`faction:${t.id}`,s=a.filter(c=>c.factionId===t.id).length,m=n&&n.includes(o),v=e&&e.includes(o);l.push({label:`[\u52BF\u529B] ${t.name}(${s})`,value:o,chipLabel:`[\u52BF\u529B] ${t.name}`,disable:!m&&s===0||v})});const V=new Set;for(const t of b.value)t.market&&!t.market.planetConditionMarketOnly&&t.market.size>=3&&V.add(t.market.size.toString());Array.from(V).sort((t,o)=>Number(t)-Number(o)).forEach(t=>{const o=`size:${t}`,s=a.filter(c=>c.market&&!c.market.planetConditionMarketOnly&&c.market.size.toString()===t).length,m=n&&n.includes(o),v=e&&e.includes(o);l.push({label:`[\u6B96\u6C11\u5730\u5927\u5C0F] ${t}(${s})`,value:o,chipLabel:`[\u6B96\u6C11\u5730\u5927\u5C0F] ${t}`,disable:!m&&s===0||v})});const O=new Map;for(const t of b.value)O.set(t.typeId,{id:t.typeId,name:t.type.name});return Array.from(O.values()).sort((t,o)=>t.name.localeCompare(o.name)).forEach(t=>{const o=`type:${t.id}`,s=a.filter(c=>c.typeId===t.id).length,m=n&&n.includes(o),v=e&&e.includes(o);l.push({label:`[\u661F\u7403\u7C7B\u578B] ${t.name}(${s})`,value:o,chipLabel:`[\u661F\u7403\u7C7B\u578B] ${t.name}`,disable:!m&&s===0||v})}),l}function $(a,n){const[e,l]=n.split(":");return e==="faction"?a.factionId===l:e==="size"?!a.market||a.market.planetConditionMarketOnly?!1:a.market.size.toString()===l:e==="type"?a.typeId===l:!1}return(a,n)=>(d(),f(P,null,[x.hiddenOptions?B("",!0):(d(),f("div",H,[i("div",J,[i("div",K,[i("div",W,[n[2]||(n[2]=i("div",{class:"filter-item-label"},"\u5305\u542B\u6761\u4EF6",-1)),g(E,{modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=e=>u.value=e),options:L.value,multiple:"","emit-value":"","map-options":"","use-chips":"",dense:"","options-dense":"",behavior:M(C).screen.lt.sm?"dialog":"menu",clearable:"","clear-icon":"close",placeholder:"\u9009\u62E9\u9700\u8981\u5305\u542B\u7684\u6761\u4EF6"},{"selected-item":p(e=>[g(z,{removable:"",dense:"",onRemove:l=>e.removeAtIndex(e.index),tabindex:e.tabindex,color:"primary","text-color":"white"},{default:p(()=>[_(h(e.opt.chipLabel||e.opt.label),1)]),_:2},1032,["onRemove","tabindex"])]),_:1},8,["modelValue","options","behavior"])]),i("div",X,[n[3]||(n[3]=i("div",{class:"filter-item-label"},"\u6392\u9664\u6761\u4EF6",-1)),g(E,{modelValue:r.value,"onUpdate:modelValue":n[1]||(n[1]=e=>r.value=e),options:N.value,multiple:"","emit-value":"","map-options":"","use-chips":"",dense:"","options-dense":"",behavior:M(C).screen.lt.sm?"dialog":"menu",clearable:"","clear-icon":"close",placeholder:"\u9009\u62E9\u9700\u8981\u6392\u9664\u7684\u6761\u4EF6"},{"selected-item":p(e=>[g(z,{removable:"",dense:"",onRemove:l=>e.removeAtIndex(e.index),tabindex:e.tabindex,color:"negative","text-color":"white"},{default:p(()=>[_(h(e.opt.chipLabel||e.opt.label),1)]),_:2},1032,["onRemove","tabindex"])]),_:1},8,["modelValue","options","behavior"])])])])])),x.hiddenOptions?B("",!0):(d(),f("div",Y," \u5171 "+h(y.value.length)+" \u4E2A\u7ED3\u679C ",1)),i("div",Z,[(d(!0),f(P,null,R(y.value,e=>(d(),T(Q,{class:"card-item","no-caps":"",key:e.id,to:{name:"planet",params:{id:e.id}}},{default:p(()=>[i("div",j,[i("div",{style:F({width:50+"px",height:50+"px",backgroundColor:"#"+e.type.color,backgroundSize:"cover",backgroundPosition:"center",maskImage:`url(${e.type.iconTexture})`,maskSize:"cover"})},null,4),i("span",{style:F({color:"#"+e.faction.color})},[_(h(e.name)+" ",1),e.market&&!e.market.planetConditionMarketOnly?(d(),f("span",G,h(e.market.size),1)):B("",!0)],4)])]),_:2},1032,["to"]))),128))])],64))}});export{ie as _};
