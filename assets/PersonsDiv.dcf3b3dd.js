import{u as C,Q as g}from"./use-quasar.ad376913.js";import{Q as Y}from"./QBtn.1a2e21ed.js";import{E as Q,r as V,a as m,G as o,V as n,X as s,J as y,O as N,N as b,_,Y as w,H as S,I as $,W as U,Z as A,a3 as D,$ as x,av as q}from"./index.407d4528.js";const z={key:0,class:"filter-toolbar"},G={key:0,class:"filter-block"},H={key:1,class:"filter-block"},J={key:2,class:"filter-block"},L={class:"card-item-list-page"},M={class:"card-item-content"},W=["src"],K=Q({name:"PersonsDiv",__name:"PersonsDiv",props:{personValues:{},hiddenOptions:{type:Boolean,default:!1}},setup(F){const h=C(),i=V([]),u=V([]),O=[{label:"\u662F",value:"Y"},{label:"\u5426",value:"N"}],r=V([]),P=[{label:"\u662F",value:"Y"},{label:"\u5426",value:"N"}],I=m(()=>{const t=v(f(c.value,u.value),r.value),e=new Map;for(const l of c.value)e.set(l.factionId,{id:l.factionId,name:l.faction.displayName});return Array.from(e.values()).sort((l,d)=>l.name.localeCompare(d.name)).map(l=>({label:`${l.name}(${p(t,[l.id]).length})`,value:l.id}))}),k=m(()=>{const t=v(p(c.value,i.value),r.value);return D(O,e=>f(t,[e]).length)}),B=m(()=>{const t=f(p(c.value,i.value),u.value);return D(P,e=>v(t,[e]).length)}),c=m(()=>F.personValues.map(t=>typeof t=="string"?x.getPersonById(t):t).filter(t=>t!==void 0).sort(q)),E=m(()=>v(f(p(c.value,i.value),u.value),r.value));function p(t,e){return!e||e.length===0?t:t.filter(l=>e.includes(l.factionId))}function f(t,e){if(!e||e.length===0)return t;const l=e.includes("Y"),d=e.includes("N");return l&&d?t:l?t.filter(a=>a.defaults):t.filter(a=>!a.defaults)}function v(t,e){if(!e||e.length===0)return t;const l=e.includes("Y"),d=e.includes("N");return l&&d?t:l?t.filter(a=>Boolean(a.aiCore)):t.filter(a=>!a.aiCore)}return(t,e)=>(o(),n(_,null,[t.hiddenOptions?b("",!0):(o(),n("div",z,[I.value.length?(o(),n("div",G,[e[3]||(e[3]=s("span",null,"\u52BF\u529B:",-1)),y(g,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=l=>i.value=l),options:I.value,multiple:"","emit-value":"","map-options":"","use-chips":"",dense:"","options-dense":"",behavior:N(h).screen.lt.sm?"dialog":"menu",clearable:"","clear-icon":"close","clear-value":[],placeholder:"\u5168\u90E8"},null,8,["modelValue","options","behavior"])])):b("",!0),k.value.length?(o(),n("div",H,[e[4]||(e[4]=s("span",null,"\u662F\u5426\u4E3A\u9ED8\u8BA4:",-1)),y(g,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=l=>u.value=l),options:k.value,multiple:"","emit-value":"","map-options":"","use-chips":"",dense:"","options-dense":"",behavior:N(h).screen.lt.sm?"dialog":"menu",clearable:"","clear-icon":"close","clear-value":[],placeholder:"\u5168\u90E8"},null,8,["modelValue","options","behavior"])])):b("",!0),B.value.length?(o(),n("div",J,[e[5]||(e[5]=s("span",null,"\u662F\u5426\u4E3AAI\u6838\u5FC3:",-1)),y(g,{modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=l=>r.value=l),options:B.value,multiple:"","emit-value":"","map-options":"","use-chips":"",dense:"","options-dense":"",behavior:N(h).screen.lt.sm?"dialog":"menu",clearable:"","clear-icon":"close","clear-value":[],placeholder:"\u5168\u90E8"},null,8,["modelValue","options","behavior"])])):b("",!0)])),s("div",L,[(o(!0),n(_,null,w(E.value,l=>(o(),S(Y,{class:"card-item","no-caps":"",key:l.id,to:{name:"person",params:{id:l.id}}},{default:$(()=>[s("div",M,[s("img",{decoding:"async",src:l.portraitSprite},null,8,W),s("span",{style:U({color:"#"+l.faction.color})},A(l.firstName)+" "+A(l.lastName),5)])]),_:2},1032,["to"]))),128))])],64))}});export{K as _};
